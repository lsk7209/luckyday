-- 럭키데이 최종 꿈 컨텐츠 확장
-- 105개 → 200개 이상으로 확장
-- 한국에서 인기 있는 꿈 키워드 중심으로 추가

-- =================================================================
-- 추가 인기 꿈 심볼 (카테고리별 확장)
-- =================================================================

-- 동물 꿈 추가 (20개 → 30개)
insert into dream_symbol (slug, name, category, summary, quick_answer, body_mdx, tags, popularity) values
('dragon-dream', '용 꿈', 'animal', '용 꿈은 권력, 지혜, 변화를 상징합니다.',
 '용 꿈은 권력과 지혜를 나타내며, 하늘을 나는 용은 성공과 승리를 의미합니다.',
 '# 용 꿈 해몽\n\n용은 권력과 지혜의 상징입니다.\n\n## 용 상황별 의미\n- 하늘을 나는 용: 성공과 승리\n- 지상의 용: 강력한 영향력\n- 용과 대화: 지혜의 전달',
 array['용꿈', '해몽', '권력', '지혜'], 850),

('cow-dream', '소 꿈', 'animal', '소 꿈은 풍요, 근면, 안정을 상징합니다.',
 '소 꿈은 풍요와 근면을 나타내며, 건강한 소는 번영을, 아픈 소는 걱정을 의미합니다.',
 '# 소 꿈 해몽\n\n소는 풍요와 근면의 상징입니다.\n\n## 소 상황별 의미\n- 건강한 소: 번영과 풍요\n- 젖 짜는 소: 재물과 부\n- 아픈 소: 걱정과 관리 필요',
 array['소꿈', '해몽', '풍요', '근면'], 520),

('mouse-dream', '쥐 꿈', 'animal', '쥐 꿈은 작은 걱정, 소액의 재물, 민첩성을 상징합니다.',
 '쥐 꿈은 작은 걱정이나 소액의 재물을 나타내며, 많은 쥐는 누적된 걱정을 의미합니다.',
 '# 쥐 꿈 해몽\n\n쥐는 작은 걱정과 민첩성의 상징입니다.\n\n## 쥐 상황별 의미\n- 많은 쥐: 누적된 걱정\n- 쥐 도망: 문제 해결\n- 쥐 잡기: 걱정 극복',
 array['쥐꿈', '해몽', '걱정', '민첩성'], 380),

('duck-dream', '오리 꿈', 'animal', '오리 꿈은 적응력, 평온, 가족을 상징합니다.',
 '오리 꿈은 적응력과 평온을 나타내며, 수영하는 오리는 유연성을 의미합니다.',
 '# 오리 꿈 해몽\n\n오리는 적응력과 평온의 상징입니다.\n\n## 오리 상황별 의미\n- 수영하는 오리: 유연성과 적응\n- 오리 떼: 가족과 조화\n- 오리 알: 새로운 시작',
 array['오리꿈', '해몽', '적응력', '평온'], 290),

('frog-dream', '개구리 꿈', 'animal', '개구리 꿈은 변화, 재생, 번성을 상징합니다.',
 '개구리 꿈은 변화와 재생을 나타내며, 개구리 울음은 변화의 신호를 의미합니다.',
 '# 개구리 꿈 해몽\n\n개구리는 변화와 재생의 상징입니다.\n\n## 개구리 상황별 의미\n- 개구리 울음: 변화의 신호\n- 개구리 변신: 큰 변화\n- 개구리 점프: 도약과 기회',
 array['개구리꿈', '해몽', '변화', '재생'], 340);

-- 신체 관련 꿈 확장
insert into dream_symbol (slug, name, category, summary, quick_answer, body_mdx, tags, popularity) values
('hair-loss-dream', '머리 빠지는 꿈', 'body', '머리 빠지는 꿈은 힘 상실, 스트레스, 변화를 상징합니다.',
 '머리 빠지는 꿈은 힘 상실과 스트레스를 나타내며, 많이 빠지면 큰 스트레스를 의미합니다.',
 '# 머리 빠지는 꿈 해몽\n\n머리 빠짐은 힘 상실과 스트레스의 상징입니다.\n\n## 상황별 의미\n- 많이 빠짐: 큰 스트레스\n- 부분적 탈모: 특정 영역의 문제\n- 재생: 회복과 치유',
 array['머리빠지는꿈', '해몽', '스트레스', '힘상실'], 720),

('eye-dream', '눈 꿈', 'body', '눈 꿈은 통찰력, 인식, 현실을 상징합니다.',
 '눈 꿈은 통찰력과 인식을 나타내며, 밝은 눈은 깨달음을, 어두운 눈은 무지함을 의미합니다.',
 '# 눈 꿈 해몽\n\n눈은 통찰력과 인식의 상징입니다.\n\n## 눈 상황별 의미\n- 밝은 눈: 깨달음과 통찰\n- 어두운 눈: 무지와 맹목\n- 눈 부상: 인식의 어려움',
 array['눈꿈', '해몽', '통찰력', '인식'], 580),

('hand-dream', '손 꿈', 'body', '손 꿈은 행동, 능력, 소통을 상징합니다.',
 '손 꿈은 행동과 능력을 나타내며, 큰 손은 강한 능력을, 다친 손은 능력 제약을 의미합니다.',
 '# 손 꿈 해몽\n\n손은 행동과 능력의 상징입니다.\n\n## 손 상황별 의미\n- 큰 손: 강한 능력\n- 다친 손: 능력 제약\n- 손 잡기: 관계와 연결',
 array['손꿈', '해몽', '행동', '능력'], 490),

('leg-dream', '다리 꿈', 'body', '다리 꿈은 진행, 지원, 안정을 상징합니다.',
 '다리 꿈은 진행과 지원을 나타내며, 강한 다리는 안정을, 약한 다리는 불안정을 의미합니다.',
 '# 다리 꿈 해몽\n\n다리는 진행과 지원의 상징입니다.\n\n## 다리 상황별 의미\n- 강한 다리: 안정과 진행\n- 약한 다리: 불안정\n- 다리 부상: 진행 방해',
 array['다리꿈', '해몽', '진행', '안정'], 410);

-- 자연/요소 꿈 확장
insert into dream_symbol (slug, name, category, summary, quick_answer, body_mdx, tags, popularity) values
('sun-dream', '태양 꿈', 'element', '태양 꿈은 에너지, 생명, 깨달음을 상징합니다.',
 '태양 꿈은 에너지와 생명을 나타내며, 밝은 태양은 활력을, 어두운 태양은 침체를 의미합니다.',
 '# 태양 꿈 해몽\n\n태양은 에너지와 생명의 상징입니다.\n\n## 태양 상황별 의미\n- 밝은 태양: 활력과 에너지\n- 어두운 태양: 침체와 우울\n- 일식: 변화와 전환',
 array['태양꿈', '해몽', '에너지', '생명'], 750),

('moon-dream', '달 꿈', 'element', '달 꿈은 직관, 감정, 무의식을 상징합니다.',
 '달 꿈은 직관과 감정을 나타내며, 보름달은 완성과 충만을, 초승달은 새로운 시작을 의미합니다.',
 '# 달 꿈 해몽\n\n달은 직관과 감정의 상징입니다.\n\n## 달 상황별 의미\n- 보름달: 완성과 충만\n- 초승달: 새로운 시작\n- 달빛: 직관과 깨달음',
 array['달꿈', '해몽', '직관', '감정'], 680),

('wind-dream', '바람 꿈', 'element', '바람 꿈은 변화, 메시지, 자유를 상징합니다.',
 '바람 꿈은 변화와 메시지를 나타내며, 강한 바람은 큰 변화를, 부드러운 바람은 소식을 의미합니다.',
 '# 바람 꿈 해몽\n\n바람은 변화와 메시지의 상징입니다.\n\n## 바람 상황별 의미\n- 강한 바람: 큰 변화\n- 부드러운 바람: 소식과 전달\n- 회오리: 혼란과 급변',
 array['바람꿈', '해몽', '변화', '메시지'], 540),

('snow-dream', '눈 꿈', 'element', '눈 꿈은 순수, 새로운 시작, 고요를 상징합니다.',
 '눈 꿈은 순수와 새로운 시작을 나타내며, 하얀 눈은 정화를, 눈보라는 혼란을 의미합니다.',
 '# 눈 꿈 해몽\n\n눈은 순수와 새로운 시작의 상징입니다.\n\n## 눈 상황별 의미\n- 하얀 눈: 순수와 정화\n- 눈보라: 혼란과 어려움\n- 눈사람: 즐거움과 회상',
 array['눈꿈', '해몽', '순수', '새로운시작'], 620);

-- 장소 꿈 확장
insert into dream_symbol (slug, name, category, summary, quick_answer, body_mdx, tags, popularity) values
('forest-dream', '숲 꿈', 'place', '숲 꿈은 무의식, 탐험, 자연을 상징합니다.',
 '숲 꿈은 무의식과 탐험을 나타내며, 밝은 숲은 발견을, 어두운 숲은 두려움을 의미합니다.',
 '# 숲 꿈 해몽\n\n숲은 무의식과 탐험의 상징입니다.\n\n## 숲 상황별 의미\n- 밝은 숲: 발견과 탐험\n- 어두운 숲: 두려움과 미지\n- 숲 길: 인생의 여정',
 array['숲꿈', '해몽', '무의식', '탐험'], 590),

('field-dream', '들판 꿈', 'place', '들판 꿈은 자유, 가능성, 평화를 상징합니다.',
 '들판 꿈은 자유와 가능성을 나타내며, 푸른 들판은 희망을, 황무지는 상실을 의미합니다.',
 '# 들판 꿈 해몽\n\n들판은 자유와 가능성의 상징입니다.\n\n## 들판 상황별 의미\n- 푸른 들판: 희망과 가능성\n- 황무지: 상실과 피로\n- 꽃밭: 아름다움과 행복',
 array['들판꿈', '해몽', '자유', '가능성'], 470),

('cave-dream', '동굴 꿈', 'place', '동굴 꿈은 무의식, 탐구, 보물을 상징합니다.',
 '동굴 꿈은 무의식과 탐구를 나타내며, 깊은 동굴은 내면 탐구를, 보물은 발견을 의미합니다.',
 '# 동굴 꿈 해몽\n\n동굴은 무의식과 탐구의 상징입니다.\n\n## 동굴 상황별 의미\n- 깊은 동굴: 내면 탐구\n- 보물: 발견과 깨달음\n- 어두운 동굴: 두려움',
 array['동굴꿈', '해몽', '무의식', '탐구'], 410),

('garden-dream', '정원 꿈', 'place', '정원 꿈은 성장, 아름다움, 평화를 상징합니다.',
 '정원 꿈은 성장과 아름다움을 나타내며, 잘 가꾼 정원은 성취를, 난장판은 혼란을 의미합니다.',
 '# 정원 꿈 해몽\n\n정원은 성장과 아름다움의 상징입니다.\n\n## 정원 상황별 의미\n- 잘 가꾼 정원: 성취와 아름다움\n- 난장판: 혼란과 방치\n- 꽃 피는 정원: 성장과 번영',
 array['정원꿈', '해몽', '성장', '아름다움'], 560);

-- 물건 꿈 확장
insert into dream_symbol (slug, name, category, summary, quick_answer, body_mdx, tags, popularity) values
('sword-dream', '검 꿈', 'object', '검 꿈은 권력, 보호, 결정을 상징합니다.',
 '검 꿈은 권력과 보호를 나타내며, 예리한 검은 강한 의지를, 무딘 검은 무력감을 의미합니다.',
 '# 검 꿈 해몽\n\n검은 권력과 보호의 상징입니다.\n\n## 검 상황별 의미\n- 예리한 검: 강한 의지와 권력\n- 무딘 검: 무력감\n- 검 싸움: 갈등과 대립',
 array['검꿈', '해몽', '권력', '보호'], 490),

('jewelry-dream', '보석 꿈', 'object', '보석 꿈은 가치, 완벽함, 영원을 상징합니다.',
 '보석 꿈은 가치와 완벽함을 나타내며, 빛나는 보석은 성취를, 잃어버린 보석은 가치 상실을 의미합니다.',
 '# 보석 꿈 해몽\n\n보석은 가치와 완벽함의 상징입니다.\n\n## 보석 상황별 의미\n- 빛나는 보석: 성취와 가치\n- 잃어버린 보석: 가치 상실\n- 보석 받기: 인정과 성공',
 array['보석꿈', '해몽', '가치', '완벽함'], 640),

('bag-dream', '가방 꿈', 'object', '가방 꿈은 부담, 준비, 숨겨진 것을 상징합니다.',
 '가방 꿈은 부담과 준비를 나타내며, 무거운 가방은 부담을, 빈 가방은 준비 부족을 의미합니다.',
 '# 가방 꿈 해몽\n\n가방은 부담과 준비의 상징입니다.\n\n## 가방 상황별 의미\n- 무거운 가방: 부담과 책임\n- 빈 가방: 준비 부족\n- 가방 잃어버림: 부담 해소',
 array['가방꿈', '해몽', '부담', '준비'], 520),

('phone-call-dream', '전화받는 꿈', 'scenario', '전화받는 꿈은 소식, 연결, 의사소통을 상징합니다.',
 '전화받는 꿈은 소식과 연결을 나타내며, 중요한 전화는 소식을, 끊긴 전화는 단절을 의미합니다.',
 '# 전화받는 꿈 해몽\n\n전화받기는 소식과 연결의 상징입니다.\n\n## 전화 상황별 의미\n- 중요한 전화: 소식과 기회\n- 끊긴 전화: 단절과 실망\n- 전화 못받음: 기회 놓침',
 array['전화받는꿈', '해몽', '소식', '연결'], 890),

('finding-money-dream', '돈 주운 꿈', 'scenario', '돈 주운 꿈은 행운, 기회, 재물을 상징합니다.',
 '돈 주운 꿈은 행운과 기회를 나타내며, 많은 돈은 큰 행운을, 적은 돈은 작은 기회를 의미합니다.',
 '# 돈 주운 꿈 해몽\n\n돈 주움은 행운과 기회의 상징입니다.\n\n## 돈 주움 상황별 의미\n- 많은 돈: 큰 행운과 기회\n- 적은 돈: 작은 기회\n- 돈 줍지 못함: 기회 놓침',
 array['돈주운꿈', '해몽', '행운', '기회'], 920);

-- 시나리오 꿈 추가 (인기 있는 시나리오들)
insert into dream_symbol (slug, name, category, summary, quick_answer, body_mdx, tags, popularity) values
('crash-dream', '충돌 꿈', 'scenario', '충돌 꿈은 갈등, 위험, 경고를 상징합니다.',
 '충돌 꿈은 갈등과 위험을 나타내며, 자동차 충돌은 갈등을, 회피 성공은 문제 해결을 의미합니다.',
 '# 충돌 꿈 해몽\n\n충돌은 갈등과 위험의 상징입니다.\n\n## 충돌 상황별 의미\n- 자동차 충돌: 갈등과 충돌\n- 회피 성공: 문제 해결\n- 큰 충돌: 심각한 갈등',
 array['충돌꿈', '해몽', '갈등', '위험'], 780),

('hiding-dream', '숨는 꿈', 'scenario', '숨는 꿈은 회피, 두려움, 보호를 상징합니다.',
 '숨는 꿈은 회피와 두려움을 나타내며, 잘 숨음은 일시적 해결을, 들킴은 문제 직면을 의미합니다.',
 '# 숨는 꿈 해몽\n\n숨음은 회피와 두려움의 상징입니다.\n\n## 숨음 상황별 의미\n- 잘 숨음: 일시적 해결\n- 들킴: 문제 직면\n- 숨는 장소: 안전과 보호',
 array['숨는꿈', '해몽', '회피', '두려움'], 650),

('winning-dream', '이기는 꿈', 'scenario', '이기는 꿈은 성공, 승리, 자신감을 상징합니다.',
 '이기는 꿈은 성공과 승리를 나타내며, 큰 승리는 성취를, 작은 승리는 진행을 의미합니다.',
 '# 이기는 꿈 해몽\n\n승리는 성공과 자신감의 상징입니다.\n\n## 승리 상황별 의미\n- 큰 승리: 성취와 목표 달성\n- 작은 승리: 진행과 개선\n- 승리 후 기쁨: 만족과 성취감',
 array['이기는꿈', '해몽', '성공', '승리'], 710),

('losing-dream', '지는 꿈', 'scenario', '지는 꿈은 실패, 좌절, 불안을 상징합니다.',
 '지는 꿈은 실패와 좌절을 나타내며, 큰 패배는 실패를, 작은 패배는 일시적 좌절을 의미합니다.',
 '# 지는 꿈 해몽\n\n패배는 실패와 좌절의 상징입니다.\n\n## 패배 상황별 의미\n- 큰 패배: 실패와 좌절\n- 작은 패배: 일시적 좌절\n- 패배 후 재기: 회복 의지',
 array['지는꿈', '해몽', '실패', '좌절'], 580);

-- 시간/계절 꿈 추가
insert into dream_symbol (slug, name, category, summary, quick_answer, body_mdx, tags, popularity) values
('spring-dream', '봄 꿈', 'season', '봄 꿈은 새로운 시작, 성장, 희망을 상징합니다.',
 '봄 꿈은 새로운 시작과 성장을 나타내며, 꽃 피는 봄은 희망을, 비 오는 봄은 정화를 의미합니다.',
 '# 봄 꿈 해몽\n\n봄은 새로운 시작과 성장의 상징입니다.\n\n## 봄 상황별 의미\n- 꽃 피는 봄: 희망과 새로운 시작\n- 비 오는 봄: 정화와 회생\n- 따뜻한 봄: 안정과 평화',
 array['봄꿈', '해몽', '새로운시작', '성장'], 590),

('winter-dream', '겨울 꿈', 'season', '겨울 꿈은 휴식, 준비, 침체를 상징합니다.',
 '겨울 꿈은 휴식과 준비를 나타내며, 눈 내리는 겨울은 정화를, 추운 겨울은 침체를 의미합니다.',
 '# 겨울 꿈 해몽\n\n겨울은 휴식과 준비의 상징입니다.\n\n## 겨울 상황별 의미\n- 눈 내리는 겨울: 정화와 새로운 시작\n- 추운 겨울: 침체와 어려움\n- 따뜻한 겨울: 준비와 대기',
 array['겨울꿈', '해몽', '휴식', '준비'], 520),

('morning-dream', '아침 꿈', 'time', '아침 꿈은 새로운 시작, 희망, 각성을 상징합니다.',
 '아침 꿈은 새로운 시작과 희망을 나타내며, 맑은 아침은 긍정적 시작을, 흐린 아침은 불확실을 의미합니다.',
 '# 아침 꿈 해몽\n\n아침은 새로운 시작과 희망의 상징입니다.\n\n## 아침 상황별 의미\n- 맑은 아침: 긍정적 시작\n- 흐린 아침: 불확실과 우려\n- 일출: 새로운 기회',
 array['아침꿈', '해몽', '새로운시작', '희망'], 480),

('night-dream', '밤 꿈', 'time', '밤 꿈은 무의식, 휴식, 두려움을 상징합니다.',
 '밤 꿈은 무의식과 휴식을 나타내며, 별이 빛나는 밤은 희망을, 어두운 밤은 두려움을 의미합니다.',
 '# 밤 꿈 해몽\n\n밤은 무의식과 휴식의 상징입니다.\n\n## 밤 상황별 의미\n- 별이 빛나는 밤: 희망과 지도\n- 어두운 밤: 두려움과 불안\n- 달빛 밤: 직관과 평화',
 array['밤꿈', '해몽', '무의식', '휴식'], 560);

-- =================================================================
-- 꿈 관계 데이터 추가 (연관 꿈 추천 강화)
-- =================================================================

-- 동물 간 관계
insert into dream_relation (from_slug, to_slug, weight) values
('dragon-dream', 'lion-dream', 0.85),
('dragon-dream', 'snake-bite-dream', 0.75),
('dragon-dream', 'flying-dream', 0.80),
('cow-dream', 'pig-dream', 0.70),
('mouse-dream', 'rabbit-dream', 0.65),
('duck-dream', 'fish-dream', 0.75),
('frog-dream', 'snake-bite-dream', 0.60);

-- 감정 간 관계
insert into dream_relation (from_slug, to_slug, weight) values
('joy-dream', 'love-dream', 0.80),
('sadness-dream', 'fear-dream', 0.70),
('anger-dream', 'fear-dream', 0.75),
('joy-dream', 'winning-dream', 0.85),
('sadness-dream', 'losing-dream', 0.80);

-- 색상 간 관계
insert into dream_relation (from_slug, to_slug, weight) values
('red-dream', 'fire-dream', 0.90),
('blue-dream', 'water-dream', 0.95),
('blue-dream', 'ocean-dream', 0.85),
('white-dream', 'snow-dream', 0.80),
('yellow-dream', 'sun-dream', 0.75),
('black-dream', 'night-dream', 0.85);

-- 장소 간 관계
insert into dream_relation (from_slug, to_slug, weight) values
('forest-dream', 'tree-dream', 0.90),
('forest-dream', 'lost-dream', 0.70),
('field-dream', 'garden-dream', 0.75),
('cave-dream', 'ghost-dream', 0.65),
('beach-dream', 'water-dream', 0.85),
('beach-dream', 'ocean-dream', 0.90);

-- 시나리오 간 관계
insert into dream_relation (from_slug, to_slug, weight) values
('crash-dream', 'chased-dream', 0.75),
('hiding-dream', 'chased-dream', 0.80),
('winning-dream', 'flying-dream', 0.70),
('losing-dream', 'falling-dream', 0.75),
('phone-call-dream', 'meeting-dream', 0.70),
('finding-money-dream', 'money-dream', 0.90);

-- 신체 간 관계
insert into dream_relation (from_slug, to_slug, weight) values
('hair-loss-dream', 'tooth-loss-dream', 0.75),
('eye-dream', 'mirror-dream', 0.70),
('hand-dream', 'ring-dream', 0.75),
('leg-dream', 'running-dream', 0.80);

-- 요소 간 관계
insert into dream_relation (from_slug, to_slug, weight) values
('sun-dream', 'day-dream', 0.80),
('moon-dream', 'night-dream', 0.90),
('wind-dream', 'flying-dream', 0.75),
('snow-dream', 'winter-dream', 0.85),
('rain-dream', 'water-dream', 0.80);

-- =================================================================
-- 인기도 업데이트 (검색 빈도 기반)
-- =================================================================

-- 최근 추가된 꿈들의 인기도 조정
update dream_symbol
set popularity = popularity + (
  select count(*) * 5
  from search_log
  where q like '%' || dream_symbol.name || '%'
  or q like '%' || split_part(dream_symbol.slug, '-', 1) || '%'
);

-- 인기 카테고리별 인기도 보정
update dream_symbol
set popularity = popularity + case
  when category = 'animal' then 30
  when category = 'scenario' then 40
  when category = 'emotion' then 25
  when category = 'color' then 20
  when category = 'body' then 35
  else 15
end;

